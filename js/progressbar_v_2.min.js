/*!
 * Progress Bar V 2.0 ~
 * Copyright (c) 2013-2020 Vicky Gonsalves
 * http://stackoverflow.com/users/1548301/vicky-gonsalves
 * web: http://vickygonsalves.com
 */
(function(){var e=[],t=function(e,t){var n=this,r=document,i;n._target=r.getElementById(e);n.options={imagesToPreload:"all",showProgressBar:false,loaderImagePath:null,showLoader:true,showLoadingText:true,loadingText:"Loading",loadingTextClass:null,loaderStyle:"opaque",transparency:1,backgroundColor:"#000",initAnimation:null,destroyAnimation:null,initAnimationSpeed:10,log:true};for(i in t)n.options[i]=t[i];if(n._target==null){if(n.options.log){console.log("ID '"+e+"' not found in html")}alert("ID '"+e+"' not found in html");return false}n._initLoader()};t.prototype={progress:0,imagesLoaded:0,imagesNotLoaded:0,_loading:false,_start:function(){var e=this;if(e.options.showProgressBar){e._showProgressBar()}e._preloadAllImages(e._collectAllImages())},_collectAllImages:function(){var t=this;t._getallBgimages();return e},_initLoader:function(){var e=this,t=document,n,r,i,s,o,u;e._target.style.display="none";if(e.options.showLoadingText){u=t.createElement("div");u.setAttribute("id","__defaultLoadingText");u.innerHTML=e.options.loadingText;u.style.width="100%";u.style.position="absolute";u.style.textAlign="center";u.style.top="50%";u.style.left="0";u.className=e.options.loadingTextClass;u.style.zIndex="99999999999999";t.body.insertBefore(u,t.body.firstChild)}if(e.options.showLoader&&e.options.loaderImagePath!=null){r=new Image;r.src=e.options.loaderImagePath;r.onload=function(){i=r.width;s=r.height;n=t.createElement("div");n.setAttribute("id","__defaultLoader");n.style.width=i+"px";n.style.height=s+"px";n.style.position="fixed";n.style.webkitBackfaceVisibility="hidden";n.style.left="50%";n.style.marginLeft=-(i/2)+"px";n.style.top="50%";n.style.marginTop=-(s/2)+"px";n.style.zIndex="99999999999998";n.style.background="url('"+e.options.loaderImagePath+"') center no-repeat";t.body.insertBefore(n,t.body.firstChild);if(e.options.loaderStyle=="transparent"){o=t.createElement("div");o.setAttribute("id","__defaultTransBG");o.style.width="100%";o.style.height="100%";o.style.position="fixed";o.style.webkitBackfaceVisibility="hidden";o.style.left="0px";o.style.top="0px";o.style.zIndex="99999999999997";o.style.background=e.options.backgroundColor;o.style.opacity=e.options.transparency;if(e.options.initAnimation=="fadein"){o.style.opacity=0}t.body.insertBefore(o,t.body.firstChild);e._target.style.display="block"}if(e.options.loaderStyle=="transparent"&&e.options.initAnimation=="fadein"){var u=0;var a=setInterval(function(){u++;if(u/100<e.options.transparency){o.style.opacity=u/100}else{clearInterval(a)}},e.options.initAnimationSpeed)}e._start()}}else{e._start()}},_destroyLoader:function(){var e=this,t;if(e.options.showLoader){if(e.options.loaderStyle=="transparent"&&e.options.destroyAnimation=="fadeout"){var n=e.options.transparency;var r=setInterval(function(){n=n-.01;if(n>=0){document.getElementById("__defaultTransBG").style.opacity=n}else{clearInterval(r);t=document.getElementById("__defaultLoader");t.parentNode.removeChild(t);t=document.getElementById("__defaultTransBG");t.parentNode.removeChild(t);if(e.options.showLoadingText){t=document.getElementById("__defaultLoadingText");t.parentNode.removeChild(t)}}},e.options.initAnimationSpeed)}else{if(e._loading){if(e.options.loaderImagePath!=null){t=document.getElementById("__defaultLoader");t.parentNode.removeChild(t);if(e.options.loaderStyle=="transparent"){t=document.getElementById("__defaultTransBG");t.parentNode.removeChild(t)}}if(e.options.showLoadingText){t=document.getElementById("__defaultLoadingText");t.parentNode.removeChild(t)}}}}},_getallBgimages:function(){var t=this,n,r=t._target.parentNode.getElementsByTagName("*");r=e.slice.call(r,0,r.length);while(r.length){n=t._deepCss(r.shift(),"background-image");if(n)n=/url\(['"]?([^")]+)/.exec(n)||[];n=n[1];if(n&&e.indexOf(n)==-1)e[e.length]=n}t._getallImages()},_getallImages:function(){var t=this,n,r=t._target.parentNode.querySelectorAll('img:not([src=""])');r=e.slice.call(r,0,r.length);while(r.length){n=t._deepSrc(r.shift());if(n)n=n||[];if(n&&e.indexOf(n)==-1)e[e.length]=n}},_deepSrc:function(e){if(!e||!e.src)return"";return e.src},_deepCss:function(e,t){if(!e||!e.style)return"";var n=t.replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()});if(e.currentStyle){return e.style[n]||e.currentStyle[n]||""}var r=document.defaultView||window;return e.style[n]||r.getComputedStyle(e,"").getPropertyValue(t)||""},_preloadAllImages:function(e){var t=this,n=[],r=0,i=0,s=0;if(e.length>0){if(t.options.log){try{console.warn("Images Preloading Started")}catch(o){}}for(var u=0;u<e.length;u++){n[u]=new Image;n[u].src=e[u];if(t.options.log){try{console.log("Retriving Image :"+n[u].src)}catch(o){}}n[u].onerror=function(){++r;++s;t._loading=true;t.onError();t.onProgress();t.imagesNotLoaded=s;t.progress=r*100/e.length;if(r==e.length){t._destroyLoader();t._target.style.display="block";t.onLoad();if(t.options.log){try{console.warn("Total images loaded : "+i+"/"+r);console.warn("Total images Failed : "+s+"/"+r)}catch(n){}}}};n[u].onload=function(){++r;++i;t.imagesLoaded=i;t.progress=r*100/e.length;if(t.options.log){try{console.log("Image Loaded :"+e[r-1])}catch(n){}}if(r==e.length){t._loading=true;t.onProgress();t._destroyLoader();t._target.style.display="block";t.onLoad();if(t.options.log){try{console.warn("Total images loaded : "+i+"/"+r);console.warn("Total images Failed : "+s+"/"+r)}catch(n){}}}}}}else{t._loading=true;t.onProgress();if(t.options.log){console.warn("No Images Found!");t._destroyLoader();t._target.style.display="block";t.onLoad()}}},_showProgressBar:function(){},onLoad:function(){},onProgress:function(){},onError:function(){}};Array.prototype.indexOf=Array.prototype.indexOf||function(e,t){t=t||0;var n=this.length;while(t<n){if(this[t]===e)return t;++t}return-1};if(typeof exports!=="undefined"){exports.ProgressBar=t}else{window.ProgressBar=t}})(window,document)
